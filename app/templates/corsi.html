{% set active_page = 'corsi.index' %}
{%- extends 'base.html' -%}

{%- block head_base -%}
<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles/corsi.css') }}">
{%- endblock -%}





{%- block body_base -%}

<div class="row">
    <div class="col s8 offset-s2">

        <h2>Corsi</h2>

        {%- if authenticated -%}
        <h3>I tuoi corsi</h3>
            {%- if i_tuoi_corsi -%}
            <ul class="collapsible expandable popout">
                {% for corso in i_tuoi_corsi %}
                    {% include 'corso_elem.html' %}
                {% endfor %}
            </ul>
            {%- else -%}
            Non ti sei ancora iscritto ad alcun corso.
            {%- endif -%}
        {%- endif -%}

        
        {%- if is_docente -%}
        <div>
            <button class="waves-effect waves-light btn deep-orange darken-3">
                Crea nuovo corso
            </button>
            
            <button class="waves-effect waves-light btn deep-orange darken-3" onclick="">
                Annulla
            </button>
            <button type="submit" form="{{ corso.id }}" class="waves-effect waves-light btn deep-orange darken-3" onclick="">
                Salva modifiche
            </button>

            <ul class="collapsible expandable popout">
                
                <li>
                    <div class="collapsible-header" style="display: block;">
                        Nuovo corso
                        <div class="right">
                            <i class="material-icons">expand_more</i>
                        </div>
                    </div>
                    <div class="collapsible-body">
                        <div class="row" style="margin-bottom: 0px;">
                            <div class="col s11 offset-s1">                
                                <div class="row">
                                    {%- set class_name = 'Corsi' -%}
                                    <form id="nuovo_corso_insert" class="col s12" action="/insert" method="POST">
                                        <div class="row", style="display: none;">
                                            <div class="input-field col s8">
                                                <input name='{{ class_name }}.pk' value=''>
                                            </div>
                                        </div>
                                        {%- for element in attrList.values() -%}
                                        {%- if element.insertable -%}
                                        <div class="row">
                                            <div class="input-field col s8">
                                                {%- include "form_element.html" -%}
                                            </div>
                                        </div>
                                        {%- endif -%}
                                        {%- endfor -%}
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                

            </ul>
        </div>


        {%- endif -%}



        {%- if is_docente -%}
        <h3>Altri corsi</h3>
        {%- else -%}
        <h3>Corsi disponibili</h3>
        {%- endif -%}
        
        {%- if corsi_disponibili -%}
        <ul class="collapsible expandable popout">
            {% for corso in corsi_disponibili %}
                {% include 'corso_elem.html' %}
            {% endfor %}
        </ul>
        {%- else -%}
        Nessun corso disponibile al momento. â˜¹
        {%- endif -%}


    </div>
</div>

{%- endblock -%}




{%- block base_javascript -%}
<script src="{{ url_for('static',filename='javascript/corsi.js') }}"></script>
<script src="{{ url_for('static',filename='javascript/corso_elem.js') }}"></script>
{%- endblock -%}